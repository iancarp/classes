<?php////////////////////////////////////////////////////////////////////////////////// Title:     HTML_Functions                                     			  //// Author:    Ian Carpenter                                                   //// Filename:  HTML_Functions.php                                              ////                                                                            //// History      Version     Comments                                          //// ========================================================================== //// 04/11/2006    0.01       First release is this script                  	  ////////////////////////////////////////////////////////////////////////////////////include_once('../PHP_functions/Database_Functions.php');function html_head()    { ////////////////////////////////////////////////////////////////////////////////html_head attaches the style sheet and open the html and body tags...//////////////////////////////////////////////////////////////////////////////	//echo"<LINK REL=STYLESHEET TYPE='text/css' HREF='../css/style_php.css'>";	echo'<link href="../Sandbox1/css1" rel="stylesheet" type="text/css">';	echo"<html>";	echo"<head>";	/* ?><script language='javascript' type='text/javascript'>		var $a;		function blink($a)	{		$a=$a;		$b=$a;			while($a)   {				document.getElementById($a).style.color = 'red';				$a--;			}     	setTimeout ("blink2($b)",1000)		}		function blink2($a)	{			while($a)   {				document.getElementById($a).style.color = 'green';				$a--;			}		setTimeout ("blink($b)",1000)		}		</script><? */	echo"</head>";	echo"<body>"; //onload='blink()';	echo"<div style='height:90%; border:2;'>"; } function html_foot($author) { ////////////////////////////////////////////////////////////////////////////////html_foot Closes html and body tags//////////////////////////////////////////////////////////////////////////////	echo"</div>"; // ends indent div in html_head()	echo"<div align='center'><font size='1'>"; // ends indent div in html_head()	html_p( date('Y-m-d') . " " .date('H:i:s') . " Authored by $author all rights reserved " . html_link('Vectorwave Limited','http://www.vectorwave.co.uk')); 	//html_link('Vectorwave Limited','http://www.vectorwave.co.uk');	echo"</font></div>"; // ends indent div in html_head()	echo "</body>";	echo "</html>";}function html_table1($table_data, $result)  { /*	while($row = mysql_fetch_assoc($result) or $row = mssql_fetch_assoc($result)) {	extract($row);	foreach ($table_data as $label => $table_data1)    {    echo $label . $$table_data1 . "<br>";	}	}*/ }function html_table($table_data, $result)  { /*////////////////////////////////////////////////////////////////////////////////html_table creates a table using the following criteria:-//$table_data = array (	'Header 1' => 'Column1',//						'Header 2' => 'Column2'};//Where Header 1 is the text value for the table column header and Column 1 is the//MySQL or MsSQL column name.//$result = database_connect('SELMA Log Viewer','MySQL','SELECT * FROM traplog');//is the result of the sql query passed into the function to be displayed//////////////////////////////////////////////////////////////////////////////	echo "<table width=80% class=indent cellspacing='2'>";	echo "<tr>";		foreach ($table_data as $label => $data)    {			echo "<th>$label</th>";		}	echo "</tr>";	echo "<tr>";	while($row = mysql_fetch_assoc($result) or $row = mssql_fetch_assoc($result)) {		$strCount = $strCount + 1;		if(round(($strCount/2), 0) == ($strCount/2))    {			echo "<tr id='line1'>";		}		else    {			echo "<tr id='line2'>";			}	 	extract($row);			$i++;		    foreach ($table_data as $label => $table_data1)    {			if($Location==1 and $System==1)   {				$alt= Get_MDU($Location,$System); // is in PHP_Fuctions.php;			}		        if ($table_data1=='RAdmin_Enabled' and $$table_data1=='1')   {		        				$gateway_server = 'lnv2115';				$corp_command = '"C:\Program Files\Radmin Viewer 3.0\Radmin.exe" /connect:' . $IP_Address;				$btv_command = '"C:\Program Files\Radmin Viewer 3.0\Radmin.exe" /connect:' . $IP_Address . ' /through:' . $gateway_server;									if($Domain_Name=='CORP') {						file_put_contents("$Hostname.bat", $corp_command);						}					elseif ($Domain_Name=='BTV') {						file_put_contents("RATemp/$Hostname.bat", $btv_command);						}					echo "<td><a href='RATemp/$Hostname.bat' target='Body'>							<img src='../pics/ra_viewer_alpha2.gif' width=18 height=18 border=0>							<img src='../pics/ickle.gif' border=0 width=5>							</a></td>";		        				}				elseif ($table_data1=='HTTPEnabled' and $$table_data1==1) {		        	echo "	<td><a ' href='http://$IPAddress' target='_blank' >							<img src='../pics/ie_small.gif' border='0' alt='$alt'>							</a>&nbsp</td>";		        }		        elseif($table_data1=='TelnetEnabled' and $$table_data1==1) {		        	echo "	<td><a ' href='telnet://$IPAddress'>							<img src='../pics/tel_small.gif' border='0' alt='Open Telnet Session'>							</a>&nbsp</td>";				}				elseif (($table_data1=='HTTPEnabled' or $table_data1=='TelnetEnabled') and $$table_data1==0) {		            	echo "<td>&nbsp</td>";		        	}               elseif ($table_data1=='System' and $$table_data1<=99) {		            	echo "<td>&nbsp</td>";		        	}               elseif ($table_data1=='Edit' and $_SESSION['auth']) {		        	echo "	<td><a href='index.php?page=0&mode=edit' >							<img src='../pics/caution.gif' border='0' width=18 height=18>							</a></td>";		        	}		        else{ // *** default  ***						echo "<td>" . $$table_data1 . "&nbsp</td>";				}			} // ends foreach	} // ends while			echo "</tr>";	echo "</table>";*/ } // Ends create_table function....function html_link($label,$url) {/*//////////////////////////////////////////////////////////////////////////////html_h1 passes $text into a <h1></h1> tag...//////////////////////////////////////////////////////////////////////////////*/	echo"<a href='$url'>$label</a>";}function html_header_link($label,$url) { /*////////////////////////////////////////////////////////////////////////////////html_h1 passes $text into a <h1></h1> tag...//////////////////////////////////////////////////////////////////////////////	echo"<a href='$url'>";		if($url==$_SERVER['SCRIPT_NAME'] . "?" . $_SERVER["QUERY_STRING"]) {			echo "< ".$label . " > ";			}		else {			echo " - " . $label . " - ";			}	echo"</a>";*/ }function html_h1($text) {/*//////////////////////////////////////////////////////////////////////////////html_h1 passes $text into a <h1></h1> tag...//////////////////////////////////////////////////////////////////////////////*/	echo"<h1>" . $text . "</h1>";}function html_h2($text) {/*//////////////////////////////////////////////////////////////////////////////html_h1 passes $text into a <h1></h1> tag...//////////////////////////////////////////////////////////////////////////////*/	echo"<h2>" . $text . "</h2>";}function html_h3($text) {/*//////////////////////////////////////////////////////////////////////////////html_h1 passes $text into a <h1></h1> tag...//////////////////////////////////////////////////////////////////////////////*/	echo"<h3>" . $text . "</h3>";}function html_th($text) {/*//////////////////////////////////////////////////////////////////////////////html_h1 passes $text into a <h1></h1> tag...//////////////////////////////////////////////////////////////////////////////*/	echo"<th>" . $text . "</th>";}function html_p($text) {/*//////////////////////////////////////////////////////////////////////////////html_p passes $text into a <h1></h1> tag...//////////////////////////////////////////////////////////////////////////////*/	echo"<p>" . $text . "</p>";}function html_font($text) {/*//////////////////////////////////////////////////////////////////////////////html_p passes $text into a <h1></h1> tag...//////////////////////////////////////////////////////////////////////////////*/	echo"<font>" . $text . "</font>";}function html_img($image,$alt) {/*//////////////////////////////////////////////////////////////////////////////html_img passes $image (mypic.jpg) and $alt (text) into a <img></img> tag...//////////////////////////////////////////////////////////////////////////////*/echo"<img src='$image' alt='$alt' />";}function html_select($id,$default_value) {/*//////////////////////////////////////////////////////////////////////////////html_dropdown passes an $array to create...//////////////////////////////////////////////////////////////////////////////*/if($id=='channel'){	$array = array (			'All' => '%',						      'UK' => 'UK',						      'France' => 'FR',						      'Italy' => 'IT',						      'Spain' => 'SP',						      'German' => 'GR',				      		'Euro' => 'EU');}if($id=='selma'){	$array = array (		'UK' => 'UK',						      'France' => 'FR',						      'Italy' => 'IT',						      'Spain' => 'SP',						      'German' => 'GR',				      		'Euro' => 'EU');	$id='channel';}if($id=='start_day'){    $timestamp = mktime('0','0','0',$_SESSION['start_month'],'1',$_SESSION['start_year']);	$number_of_days_in_month = date("t", $timestamp);	for($i=1;$i<=$number_of_days_in_month;$i++){		$array["$i"] = $i;		}}if($id=='start_month'){	for($i=1;$i<=12;$i++){		    $text_month = date('F', mktime('0','0','0',$i,'1',$_SESSION['start_year']));		    $array["$text_month"] = $i;			}}if($id=='start_year'){	$this_year = date('Y');	$next_year = $this_year+1;	$array = array(	$this_year => $this_year,					$next_year => $next_year);}if($id=='end_day'){    $timestamp = mktime('0','0','0',$_SESSION['end_month'],'1',$_SESSION['end_year']);	$number_of_days_in_month = date("t", $timestamp);	for($i=1;$i<=$number_of_days_in_month;$i++){		$array["$i"] = $i;		}}if($id=='end_month'){	for($i=1;$i<=12;$i++){		    $text_month = date('F', mktime('0','0','0',$i,'1',$_SESSION['end_year']));		    $array["$text_month"] = $i;			}}if($id=='end_year'){	$this_year = date('Y');	$next_year = $this_year+1;	$array = array(	$this_year => $this_year,					$next_year => $next_year);}	// gets key value from	$default_label = array_search($default_value, $array);	echo"<select name=$id onChange='submit(); return true'>";	echo "<option value =$default_value>$default_label</option>";		foreach($array as $label => $value){			echo "<option value =$value>$label</option>";			}	echo"</select>";}function html_log_select_bar($form_name)  {	  echo"<form name='form1' action='$form_name' method='POST' >";  echo"<table width=500 class=indent><tr>"; // <td>&nbsp</td>  echo"<td><table>";  echo"<tr>";	html_th('Channel');  echo"<tr>";  echo"<td>";	html_select('channel',$_SESSION['channel']); // is in HTML_Functions.php  echo"</td>";  echo"</tr>";  echo"</table></td>";  echo"<td><table>";  echo"<tr>";	html_th('Start Date');  echo"<tr>";  echo"<td>";	html_select('start_day',$_SESSION['start_day']); // is in HTML_Functions.php	html_select('start_month',$_SESSION['start_month']); // is in HTML_Functions.php	html_select('start_year',$_SESSION['start_year']); // is in HTML_Functions.php  echo"</td>";  echo"</tr>";  echo"</table></td>";  echo"<td><table>";  echo"<tr>";	html_th('End Date');  echo"<tr>";  echo"<td>";	html_select('end_day',$_SESSION['end_day']); // is in HTML_Functions.php	html_select('end_month',$_SESSION['end_month']); // is in HTML_Functions.php	html_select('end_year',$_SESSION['end_year']); // is in HTML_Functions.php  echo"</td>";  echo"</tr>";  echo"</table></td>";  echo"</td></tr></table>";  echo"</form>";  return $message;}function html_date_select_bar($form_name)  {	  echo"<form name='form1' action='$form_name' method='POST' >";  echo"<table width=500><tr>"; // <td>&nbsp</td>  echo"<td><table>";  echo"<tr>";	html_th('Date');  echo"<tr>";  echo"<td>";	html_select('start_day',$_SESSION['start_day']); // is in HTML_Functions.php	html_select('start_month',$_SESSION['start_month']); // is in HTML_Functions.php	html_select('start_year',$_SESSION['start_year']); // is in HTML_Functions.php  echo"</td>";  echo"</tr>";  echo"</table>";  echo"</form>";  return $message;}function html_fault_select_bar($form_name)  {  echo"<form name='form1' action='$form_name' method='POST' >";  echo"<table class=indent><tr>"; // <td>&nbsp</td>  echo"<td><table>";  echo"<tr>";	html_th('Channel');  echo"<tr>";  echo"<td>";	html_select('channel',$_SESSION['channel']); // is in HTML_Functions.php  echo"</td>";  echo"</tr>";  echo"</table></td>";  echo"<td><table>";  echo"<tr>";	html_th('Display Month');  echo"<tr>";  echo"<td>";	html_select('start_month',$_SESSION['start_month']); // is in HTML_Functions.php	html_select('start_year',$_SESSION['start_year']); // is in HTML_Functions.php  echo"</td>";  echo"</tr>";  echo"</table></td>";  echo"</td></tr></table>";  echo"</form>";  return $message;}function login($username,$password,$url)   { /*	echo"<div style='position:absolute; right:10%; top:5px;'>";if($_SESSION['auth'])   { // if autherised	if($_GET['logout']) {			$_SESSION['auth']=0;			header("Location: ". $_SERVER['HTTP_REFERER']);		}	else    { // if logged in	    html_img('../pics/caution.gif','Authorised');	    echo"<br/>";		html_link('logout',$_SERVER['SCRIPT_NAME'] . "?" . $_SERVER["QUERY_STRING"] .'&logout=1&mode=search');	}} // end if autherisedelseif(!$_SESSION['auth'])   { // if not autherised	if($_POST['login'])  {			///////////////////		//echo"check user";		$result = database_connect('Login','MsSQL', // is in Database_Functions.php									"SELECT type FROM users WHERE name='$username'															and password='$password'");		$row = mssql_fetch_assoc($result);		extract($row);		if($type=='admin')   {		///////////////////		$_SESSION['auth']=1;		header("Location: ". $_SERVER['SCRIPT_NAME'] . "?" . $_SERVER["QUERY_STRING"]);		}		else {		header("Location: http://lo2280/pc/KitSearch/index.php");		}		}	elseif(!$_POST['login']){		echo"<FORM action='' method=POST>";		echo"<TABLE border=0>";		echo"<TR>";			echo"<TD>";				echo html_font("Username:");			echo"</TD>";			echo"<TD><INPUT size='10' id='username' name='username'></TD>";		echo"</TR>";		echo"<TR>";			echo"<TD>";				echo html_font("Password:");			echo"</TD>";			echo"<TD><INPUT size='10' type='password' id='password' name='password'></TD>";		echo"</TR>";		echo"<TR>";			echo"<TD></TD>";			echo"<TD><INPUT id='login' type='submit' value='login' name='login' style='FLOAT: right'></TD>";		echo"</TR>";		echo"</TABLE>";		echo"</FORM>";	}} // if not Autherisedecho"</div>";*/ }function search_bar($url, $value){		echo"<FORM action='$url' method=POST>";		echo"<TABLE border=0>";		echo"<TR>";			echo"<TD>";			echo"</TD>";			echo"<TD>";				echo"<INPUT size='40' id='search_data' name='search_data' value=".  $value.">";				echo"<INPUT name='mode' value='search' type='hidden'>";			echo"</TD>";			echo"<TD>";				echo"<INPUT id='search' type='submit' value='Search' name='Search' style='FLOAT: right'>";			echo"</TD>";			echo"</TR>";		echo"</TABLE>";		echo"</FORM>";}?>